<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Usuário</title>
    <link rel="stylesheet" href="styles/style4.css">
</head>
<body>
    <div class="popupRemove" id="popupRemove">
        <img src="images/ask.png" alt="question-sign-in-circles">
        <h2>Você tem certeza que deseja remover esse Usuário?</h2>
        <button type="button" onclick="remover(), closePopup(), telaEnabled()">Sim</button>
        <button type="button" onclick="closePopup(), telaEnabled()">Não</button>
    </div>

    <div class="popupEdit" id="popupEdit">
        <img src="images/caneta.png" alt="editar">
        <h2>Digite as novas informações</h2>
        <input type="text" name="loginUsuario" placeholder="Login..." autocomplete="off" class="loginUsuario" id="loginUsuario">
        <input type="text" name="senhaUsuario" placeholder="Senha..." autocomplete="off" class="senhaUsuario" id="senhaUsuario">
        <input type="text" name="emailUsuario" placeholder="Email..." autocomplete="off" class="emailUsuario" id="emailUsuario">
        <input type="text" name="nomeUsuario" placeholder="Nome..." autocomplete="off" class="nomeUsuario" id="nomeUsuario">
        <label for="tipos">Selecione o tipo de Usuario: </label>
        <select name="Tipo de Usuário" id="tipoUsuarioEdit">
            <option value="1">Administrador</option>
            <option value="2">Funcionário</option>
            <option value="3">Estudante</option>
        </select> <br>
        <button type="button" onclick="closeEditPopup(), editar(), telaEnabled()">Confirmar</button>
        <button type="button" onclick="closeEditPopup(), telaEnabled()">Cancelar</button>
    </div>

    <div class="popupAdd" id="popupAdd">
        <img src="images/botao-adicionar3.png" alt="adicionar">
        <h2>Digite as informações do Usuario</h2>
        <input type="text" name="loginUsuario" placeholder="Login..." autocomplete="off" class="loginUsuario" id="loginUsuarioAdd">
        <input type="text" name="senhaUsuario" placeholder="Senha..." autocomplete="off" class="senhaUsuario" id="senhaUsuarioAdd">
        <input type="text" name="emailUsuario" placeholder="Email..." autocomplete="off" class="emailUsuario" id="emailUsuarioAdd">
        <input type="text" name="nomeUsuario" placeholder="Nome..." autocomplete="off" class="nomeUsuario" id="nomeUsuarioAdd">
        <label for="tipos">Selecione o tipo de Usuario: </label>
        <select name="Tipo de Usuário" id="tipoUsuario">
            <option value="1">Administrador</option>
            <option value="2">Funcionário</option>
            <option value="3">Estudante</option>
        </select> <br>
        <button type="button" onclick="closeAddPopup(), adicionar(), telaEnabled()">Confirmar</button>
        <button type="button" onclick="closeAddPopup(), telaEnabled()">Cancelar</button>
    </div>

    <div class="backdrop" id="backdrop" onclick="stopPropagation()"></div>


    <div class="tela" id="tela">
        <div class="search">
            <input type="text" placeholder="Procurar..." class="loupe" id="loupe" onkeyup="buscar()"> 
        </div>

        <div class="scroll">
        <table class="itens-table" id="itens-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Login</th>
                    <th>Senha</th>
                    <th>Email</th>
                    <th>Nome</th>
                    <th>ID_TipoDeUsuario</th>
                    <th>Remover</th>
                    <th>Editar</th>
                </tr>
            </thead>
            <tbody>
                <tr onmouseover="getindex(this)">
                    <td>1</td>
                    <td>Duda</td>
                    <td>1234</td>
                    <td>duda@gmail.com</td>
                    <td>Eduarda</td>
                    <td>1</td>
                    <td class="remove" onclick="openPopup(), teladisabled()"><a href="#"><img src="images/excluir2.png" alt="remover"></a></td>
                    <td class="edit" onclick="openEditPopup(), teladisabled()"><a href="#"><img src="images/botao-editar2.png" alt="remover"></a></td>
                </tr>
                <tr onmouseover="getindex(this)">
                    <td>2</td>
                    <td>Tarciz</td>
                    <td>0987</td>
                    <td>tarciz@gmail.com</td>
                    <td>Tarcisio</td>
                    <td>2</td>
                    <td class="remove" onclick="openPopup(), teladisabled()"><a href="#"><img src="images/excluir2.png" alt="remover"></a></td>
                    <td class="edit" onclick="openEditPopup(), teladisabled()"><a href="#"><img src="images/botao-editar2.png" alt="remover"></a></td>
                </tr>
                <tr onmouseover="getindex(this)">
                    <td>3</td>
                    <td>Theus</td>
                    <td>5678</td>
                    <td>theus@gmail.com</td>
                    <td>Matheus</td>
                    <td>1</td>
                    <td class="remove" onclick="openPopup(), teladisabled()"><a href="#"><img src="images/excluir2.png" alt="remover"></a></td>
                    <td class="edit" onclick="openEditPopup(), teladisabled()"><a href="#"><img src="images/botao-editar2.png" alt="remover"></a></td>
                </tr>
                <tr onmouseover="getindex(this)">
                    <td>4</td>
                    <td>Felps</td>
                    <td>9321</td>
                    <td>felps@gmail.com</td>
                    <td>Felipe</td>
                    <td>3</td>
                    <td class="remove" onclick="openPopup(), teladisabled()"><a href="#"><img src="images/excluir2.png" alt="remover"></a></td>
                    <td class="edit" onclick="openEditPopup(), teladisabled()"><a href="#"><img src="images/botao-editar2.png" alt="remover"></a></td>
                </tr>
                <tr onmouseover="getindex(this)">
                    <td>5</td>
                    <td>Igao</td>
                    <td>8912</td>
                    <td>igao@gmail.com</td>
                    <td>Igor</td>
                    <td>1</td>
                    <td class="remove" onclick="openPopup(), teladisabled()"><a href="#"><img src="images/excluir2.png" alt="remover"></a></td>
                    <td class="edit" onclick="openEditPopup(), teladisabled()"><a href="#"><img src="images/botao-editar2.png" alt="remover"></a></td>
                </tr>
                <tr onmouseover="getindex(this)">
                    <td>6</td>
                    <td>Vertinho</td>
                    <td>1111</td>
                    <td>vertinho@gmail.com</td>
                    <td>Everton</td>
                    <td>3</td>
                    <td class="remove" onclick="openPopup(), teladisabled()"><a href="#"><img src="images/excluir2.png" alt="remover"></a></td>
                    <td class="edit" onclick="openEditPopup(), teladisabled()"><a href="#"><img src="images/botao-editar2.png" alt="remover"></a></td>
                </tr>
                <tr onmouseover="getindex(this)">
                    <td>7</td>
                    <td>Juju</td>
                    <td>2424</td>
                    <td>juju@gmail.com</td>
                    <td>Julius</td>
                    <td>2</td>
                    <td class="remove" onclick="openPopup(), teladisabled()"><a href="#"><img src="images/excluir2.png" alt="remover"></a></td>
                    <td class="edit" onclick="openEditPopup(), teladisabled()"><a href="#"><img src="images/botao-editar2.png" alt="remover"></a></td>
                </tr>
            </tbody>
        </table>

        </div>
        
        <button class="homescreen"> <a href="homescreen.html"> <img src="images/homescreen3.png" alt="homescreen"><p>Homescreen</p></a></button>

        <button class="adicionar" type="button" onclick="openAddPopup(), teladisabled()"><img src="images/botao-adicionar2.png" alt="adicionar" title="Adicionar"></button>

        <script>

            function stopPropagation(event){
                event.stopPropagation();
            }

            function openAddPopup(){
                popupAdd.classList.add("openAddPopup");
            }

            function closeAddPopup(){
                popupAdd.classList.remove("openAddPopup");
            }

            function openPopup(){
                popup.classList.add("open_popup");
            }

            function teladisabled(){
                telaDesativada.classList.add("disabled_tela");
                backdrop.classList.add("disabled_tela");
            }

            function getindex(x){
                globalThis.Index = x.rowIndex;
            }

            function telaEnabled(){
                telaDesativada.classList.remove("disabled_tela");
                backdrop.classList.remove("disabled_tela");
            }

            function closePopup(){
                popup.classList.remove("open_popup");
            }

            function openEditPopup(){
                popupEdit.classList.add("popupEditOpen");
                document.getElementById("loginUsuario").value = tablee.rows[Index].cells[1].innerHTML;
                document.getElementById("senhaUsuario").value = tablee.rows[Index].cells[2].innerHTML;
                document.getElementById("emailUsuario").value = tablee.rows[Index].cells[3].innerHTML;
                document.getElementById("nomeUsuario").value = tablee.rows[Index].cells[4].innerHTML;
            }

            var tablee = document.getElementById("itens-table");

            function closeEditPopup(){
                popupEdit.classList.remove("popupEditOpen");
            }

            function adicionar(){
            
                var tablee = document.getElementById("itens-table");

                var row =  tablee.insertRow(1);
                row.onmouseover = () =>{
                    getindex(row);
                }
                const itens = document.querySelectorAll('tr');
                console.log(itens);
                
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
                var cell4 = row.insertCell(3);
                var cell5 = row.insertCell(4);
                var cell6 = row.insertCell(5);
                var cell7 = row.insertCell(6);
                var cell8 = row.insertCell(7);
                

                var login = document.getElementById("loginUsuarioAdd").value;
                var senha = document.getElementById("senhaUsuarioAdd").value;
                var email = document.getElementById("emailUsuarioAdd").value;
                var nome = document.getElementById("nomeUsuarioAdd").value;
                var tipousuario = document.getElementById("tipoUsuario");
                var valor = tipousuario.options[tipousuario.selectedIndex].value;
                
                cell1.innerHTML = 8;
                cell2.innerHTML = login;
                cell3.innerHTML = senha;
                cell4.innerHTML = email;
                cell5.innerHTML = nome;
                cell6.innerHTML = valor;
                cell7.innerHTML = '<a href="#"><img src="images/excluir2.png" alt="remover"></a>'
                cell7.onclick = () => {
                    openPopup();
                    teladisabled();
                }
                cell8.innerHTML = '<a href="#"><img src="images/botao-editar2.png" alt="remover"></a>'
                cell8.onclick = () => {
                    openEditPopup();
                    teladisabled();
                }

                document.getElementById("loginUsuarioAdd").value = "";
                document.getElementById("senhaUsuarioAdd").value = "";
                document.getElementById("emailUsuarioAdd").value = "";
                document.getElementById("nomeUsuarioAdd").value = "";
            }
            
            function remover(){
                console.log(Index);
                if(Index > -1){
                    document.getElementById("itens-table").deleteRow(Index);
                }
            }

            function buscar(){

                var input, filter, table, tr, td, i, txtValue;
                input = document.getElementById("loupe");
                filter = input.value.toUpperCase();
                table = document.getElementById("itens-table");
                tr = table.getElementsByTagName("tr");

                        for (i = 0; i < tr.length; i++) {
                        td = tr[i].getElementsByTagName("td")[1];
                        if (td) {
                        txtValue = td.textContent || td.innerText;
                        if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                        } else {
                        tr[i].style.display = "none";
                        }
                    }
                }
            }

            var table = document.getElementById("itens-table");

            function editar(){

                var login = document.getElementById("loginUsuario").value;
                var senha = document.getElementById("senhaUsuario").value;
                var email = document.getElementById("emailUsuario").value;
                var nome = document.getElementById("nomeUsuario").value;
                var tipousuario = document.getElementById("tipoUsuarioEdit");
                var valor = tipousuario.options[tipousuario.selectedIndex].value;

                table.rows[Index].cells[1].innerHTML = login;
                table.rows[Index].cells[2].innerHTML = senha;
                table.rows[Index].cells[3].innerHTML = email;
                table.rows[Index].cells[4].innerHTML = nome;
                table.rows[Index].cells[5].innerHTML = valor;
            }
        
        let popup = document.getElementById("popupRemove");
        let telaDesativada = document.getElementById("tela");
        let backdrop = document.getElementById("backdrop");
        let popupEdit = document.getElementById("popupEdit");
        let popupAdd = document.getElementById("popupAdd");
        var tableInteract = document.getElementById("itens-table");

        </script>
    </div>

</body>
</html>